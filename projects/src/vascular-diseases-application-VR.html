<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture VR</title>
    <link rel="stylesheet" href="../../css/w3.css">

    <style>
        body {
            margin: 0;
            overflow: hidden;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>

    <!-- Library of Virtual Reality -->
    <script type="text/javascript" charset="UTF-8" src="../libs/aframe-master.js"></script>
    <script type="text/javascript" charset="UTF-8" src="../libs/util/Aframe-Extras/aframe-extras.js"></script>

    <script>
        AFRAME.registerComponent('controls', {
            init: function () {
                this.gamepad;
                this.model = document.querySelector('#aneurism').object3D;
                this.panel = document.querySelector('#panel').object3D;
                this.camera = document.querySelector('#camera').object3D;
            },
            tick: function (time, delta) {
                this.gamepad = navigator.getGamepads()[0];
                if (!this.gamepad) return;

                if (this.gamepad.axes[0] !== 0) {
                    this.model.rotation.y += 0.002 * delta * this.gamepad.axes[0];
                }

                if (this.gamepad.axes[1] !== 0) {
                    this.camera.position.z += 0.002 * delta * this.gamepad.axes[1];
                    this.panel.position.z += 0.002 * delta * this.gamepad.axes[1];
                }

            }
        });
    </script>
</head>

<body>
    <a-scene main_scene id="scene">
        <a-assets timeout="3000">
            <a-asset-item id="strokeModel" src="assets/models/vascular-diseases/an.glb"></a-asset-item>
            <!-- <img id="skyBoxMap" src="./assets/textures/cloud.jpg"> -->
            <img id="text" src="assets/textures/text.png">
        </a-assets>

        <a-entity light="type: ambient; color: #fff; intensity: 0.3"></a-entity>
        <a-entity light="color: #fff" position="-65 110 0"></a-entity>

        <a-sky color="#343434"></a-sky>

        <a-entity id="aneurism" position="-1 0 0" gltf-model="#strokeModel" controls></a-entity>
        <a-plane position="0 0 0" rotation="-90 0 0" width="10" height="10" color="#A1ACB3"
            material="transparent: true; opacity: 0.5"></a-plane>
        <a-plane id="panel" position="2 1.25 3" rotation="0 -90 0" width="1" height="2" material="src: #text"></a-plane>

        <a-entity id="rig" position="0 0 3">
            <a-entity id="camera" camera position="0 1.6 0" look-controls="pointerLockEnabled: true">
            </a-entity>
        </a-entity>

    </a-scene>

</body>

</html>